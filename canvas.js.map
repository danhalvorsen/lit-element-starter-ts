{"version":3,"file":"canvas.js","sourceRoot":"","sources":["src/canvas.ts"],"names":[],"mappings":"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","sourcesContent":["// import {html, css, LitElement} from 'lit';\n// import {customElement, query} from 'lit/decorators.js';\n\n// type DragType = 'none' | 'canvas' | 'element';\n// type SupportedNode = HTMLElement | SVGElement;\n\n// @customElement('css-canvas')\n// export class CSSCanvas extends LitElement {\n//   @query('main') root!: HTMLElement;\n//   @query('#children') container!: HTMLElement;\n//   @query('canvas') canvas!: HTMLCanvasElement;\n//   dragType: DragType = 'none';\n//   offset: Offset = {x: 0, y: 0};\n//   pointerMap: Map<number, PointerData> = new Map();\n\n//   static override readonly styles = css`\n//     :host {\n//       --offset-x: 0;\n//       --offset-y: 0;\n//       --grid-background-color: white;\n//       --grid-color: black;\n//       --grid-size: 40px;\n//       --grid-dot-size: 1px;\n//     }\n//     main {\n//       overflow: hidden;\n//     }\n//     canvas {\n//       background-size: var(--grid-size) var(--grid-size);\n//       background-image: radial-gradient(\n//         circle,\n//         var(--grid-color) var(--grid-dot-size),\n//         var(--grid-background-color) var(--grid-dot-size)\n//       );\n//       background-position: var(--offset-x) var(--offset-y);\n//       z-index: 0;\n//     }\n//     .full-size {\n//       width: 100%;\n//       height: 100%;\n//       position: fixed;\n//     }\n//     .child {\n//       --dx: 0px;\n//       --dy: 0px;\n//       position: fixed;\n//       flex-shrink: 1;\n//       z-index: var(--layer, 0);\n//       transform: translate(var(--dx), var(--dy));\n//     }\n//     @media (prefers-color-scheme: dark) {\n//       main {\n//         --grid-background-color: black;\n//         --grid-color: grey;\n//       }\n//     }\n//   `;\n\n//   override render() {\n//     console.log('render');\n//     return html`\n//       <main class=\"full-size\">\n//         <canvas class=\"full-size\"></canvas>\n//         <div id=\"children\" class=\"full-size\"></div>\n//       </main>\n//     `;\n//   }\n\n//   handleDown(event: PointerEvent, type: DragType) {\n//     if (this.dragType === 'none') {\n//       event.preventDefault();\n//       this.dragType = type;\n//       (event.target as Element).setPointerCapture(event.pointerId);\n//       this.pointerMap.set(event.pointerId, {\n//         id: event.pointerId,\n//         startPos: {x: event.clientX, y: event.clientY},\n//         currentPos: {x: event.clientX, y: event.clientY},\n//       });\n//     }\n//   }\n\n//   handleMove(\n//     event: PointerEvent,\n//     type: DragType,\n//     onMove: (delta: Offset) => void\n//   ) {\n//     if (this.dragType === type) {\n//       event.preventDefault();\n//       const saved = this.pointerMap.get(event.pointerId)!;\n//       const current = {...saved.currentPos};\n//       saved.currentPos = {x: event.clientX, y: event.clientY};\n//       const delta = {\n//         x: saved.currentPos.x - current.x,\n//         y: saved.currentPos.y - current.y,\n//       };\n//       onMove(delta);\n//     }\n//   }\n\n//   handleUp(event: PointerEvent) {\n//     this.dragType = 'none';\n//     (event.target as Element).releasePointerCapture(event.pointerId);\n//   }\n\n//   moveCanvas(delta: Offset) {\n//     this.offset.x += delta.x;\n//     this.offset.y += delta.y;\n//     this.root.style.setProperty('--offset-x', `${this.offset.x}px`);\n//     this.root.style.setProperty('--offset-y', `${this.offset.y}px`);\n//   }\n\n//   moveElement(child: SupportedNode, delta: Offset) {\n//     const getNumber = (key: '--dx' | '--dy', fallback: number) => {\n//       const saved = child.style.getPropertyValue(key);\n//       if (saved.length > 0) {\n//         return parseFloat(saved.replace('px', ''));\n//       }\n//       return fallback;\n//     };\n//     const dx = getNumber('--dx', 0) + delta.x;\n//     const dy = getNumber('--dy', 0) + delta.y;\n//     child.style.transform = `translate(${dx}px, ${dy}px)`;\n//     child.style.setProperty('--dx', `${dx}px`);\n//     child.style.setProperty('--dy', `${dy}px`);\n//   }\n\n//   /**\n//    * Method to update the first render of the component.\n//    *\n//    * @return {Promise<void>} A promise that resolves when the update is complete\n//    */\n//   override async firstUpdated() {\n//     const items = Array.from(this.childNodes);\n//     let i = 0;\n//     for (const node of items) {\n//       if (node instanceof SVGElement || node instanceof HTMLElement) {\n//         const child = node as SupportedNode;\n//         child.classList.add('child');\n//         child.style.setProperty('--layer', `${i}`);\n//         this.container.append(child);\n//         child.addEventListener('pointerdown', (e: any) => {\n//           this.handleDown(e, 'element');\n//         });\n//         child.addEventListener('pointermove', (e: any) => {\n//           this.handleMove(e, 'element', (delta) => {\n//             this.moveElement(child, delta);\n//           });\n//         });\n//         i++;\n//       }\n//     }\n//     this.requestUpdate();\n//     this.root.addEventListener('pointerdown', (e: any) => {\n//       this.handleDown(e, 'canvas');\n//     });\n\n//     this.root.addEventListener('pointermove', (e: any) => {\n//       this.handleMove(e, 'canvas', (delta) => {\n//         this.moveCanvas(delta);\n//         for (const node of Array.from(this.container.children)) {\n//           if (node instanceof SVGElement || node instanceof HTMLElement) {\n//             this.moveElement(node, delta);\n//           }\n//         }\n//       });\n//     });\n//     this.root.addEventListener('pointerup', (e: any) => {\n//       this.handleUp(e);\n//     });\n//   }\n// }\n\n// interface Offset {\n//   x: number;\n//   y: number;\n// }\n\n// interface PointerData {\n//   id: number;\n//   startPos: Offset;\n//   currentPos: Offset;\n// }\n"]}